<!DOCTYPE html>
<html lang="en">
  <head>
    <title>LOGIN FORM</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
    <script src="angularApp.js"></script>
    <script src="/controllers/controllers.js"></script>
    <script src="/services/services.js"></script>
  </head>
  <body ng-app="appDecimation">
    <div class="container">
      <h2>Iniciar sesi칩n</h2>
      <form  ng-controller="initSession" ng-submit="submitData()">
        <div class="col-md-4">
          <div class="form-group">
            <label for="email">Correo Electr칩nico:</label>
            <input type="email" class="form-control" id="email" placeholder="Correo@correo.com" ng-model="user.email">
            <!--<span ng-show="errorEmail">{{errorEmail}}</span> -->
          </div>

          <div class="form-group">
            <label for="pwd">Contrase침a:</label>
            <input type="password" class="form-control" id="password" placeholder="Contrase침a" ng-model="user.password">
          </div>

          <button type="submit" class="login loginmodal-submit">Ingresar</button>
          <p>{{errorInitSession}}</p>
        </div>
      </form>
    </div>

<script>
  var postApp = angular.module('appDecimation', []);
    // Controller function and passing $http service and $scope var.
    postApp.controller('initSession', function($scope, $http) {
      // create a blank object to handle form data.
        $scope.user = {};
      // calling our submit function.
        $scope.submitData = function () {
          $http.post("/login", $scope.user)
          .then( 
            function mySucces(response) {
              window.location = "/uploadfile-js";
            }, 
            function myError(response) {
              $scope.errorInitSession = "ERROR, intenta de nuevo";
              //window.location = "/static-index.html"
            }
          );
        }
    });
</script>
</body>
</html>

